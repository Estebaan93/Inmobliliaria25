@model IEnumerable<Inmobiliaria25.Models.Contrato>

@{
	ViewData["Title"] = "Contratos";
}

<h2>Gestión de Contratos</h2>

<p>
	<a asp-action="Crear" class="btn btn-primary">Nuevo Contrato</a>
</p>

<table class="table table-striped table-bordered">
	<thead class="table-dark">
		<tr>
			<th>Inquilino</th>
			<th>Inmueble</th>
			<th>Monto</th>
			<th>Fecha Inicio</th>
			<th>Fecha Fin</th>
			<th>Fecha Anulación</th>
			<th>Estado</th>
			<th>Acciones</th>
			<th>Pagos</th>
		</tr>
	</thead>
	<tbody>
		@foreach (var c in Model)
		{
			<tr>
				<td>@c.inquilino?.Apellido @c.inquilino?.Nombre</td>
				<td>@c.inmueble?.Descripcion</td>
				<td>$@c.Monto</td>
				<td>@c.FechaInicio.ToString("dd/MM/yyyy")</td>
				<td>@c.FechaFin.ToString("dd/MM/yyyy")</td>
				<td>@(c.FechaAnulacion?.ToString("dd/MM/yyyy") ?? "---")</td>
				<td>@c.EstadoDescripcion</td>
				<td class="text-center">
					<div class="btn-group" role="group">
						<a asp-action="Detalles" asp-route-id="@c.IdContrato" class="btn btn-info btn-sm" title="Detalles">
							<i class="fa-solid fa-circle-info"></i>
						</a>
						<a asp-action="Editar" asp-route-id="@c.IdContrato" class="btn btn-warning btn-sm" title="Renovar">
							<i class="fa-solid fa-pen-to-square"></i>
						</a>
					</div>
				</td>
				<td class="text-center">
					<a asp-controller="Pago" asp-action="Index" asp-route-idContrato="@c.IdContrato" class="btn btn-success btn-sm"
						title="Ver Pagos">
						<i class="fa-solid fa-money-bill-wave"></i> Pagos
					</a>
				</td>
			</tr>
		}
	</tbody>
</table>
